services:
  # Backend Service (FastAPI + Hugging Face Cloud) 
  backend:
    build:
      context: ../backend  
      dockerfile: ../docker/Dockerfile.backend 
    container_name: csa_chatbot_backend
    env_file:
      - ../backend/.env  
    environment:
      - HF_TOKEN=${HF_TOKEN}
      - HF_MODEL_ID=${HF_MODEL_ID}

    ports:
      - "8000:8000"
    restart: always
    
  # Frontend Service (Vite + React)
  frontend:
    build:
      context: ../frontend  
      dockerfile: ../docker/Dockerfile.frontend
      args:
        - VITE_API_BASE_URL=/api
    container_name: csa_chatbot_frontend
    ports:
      - "5173:5173"
    depends_on:
      - backend
    restart: always